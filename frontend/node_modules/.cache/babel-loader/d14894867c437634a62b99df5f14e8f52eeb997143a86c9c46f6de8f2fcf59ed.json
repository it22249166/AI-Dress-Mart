{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{MessageCircle,X,Send,Sparkles}from'lucide-react';import{chatWithAI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatBot=()=>{const[isOpen,setIsOpen]=useState(false);const[messages,setMessages]=useState([{text:\"Hi! I'm your AI fashion assistant. How can I help you find the perfect dress today?\",sender:'ai'}]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{scrollToBottom();},[messages]);const sendMessage=async()=>{if(!input.trim())return;const userMessage={text:input,sender:'user'};setMessages([...messages,userMessage]);setInput('');setLoading(true);try{const{data}=await chatWithAI(input);setMessages(prev=>[...prev,{text:data.message,sender:'ai'}]);}catch(error){setMessages(prev=>[...prev,{text:'Sorry, I encountered an error. Please try again!',sender:'ai'}]);}finally{setLoading(false);}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOpen(!isOpen),className:\"fixed bottom-6 right-6 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition z-50\",children:isOpen?/*#__PURE__*/_jsx(X,{size:24}):/*#__PURE__*/_jsx(MessageCircle,{size:24})}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-20 right-6 w-80 max-h-[500px] bg-white rounded-lg shadow-2xl flex flex-col overflow-hidden z-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-600 text-white p-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"AI Fashion Assistant\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOpen(false),children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-4 overflow-y-auto space-y-2\",children:[messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(message.sender==='user'?'justify-end':'justify-start'),children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-[80%] p-2 rounded-lg \".concat(message.sender==='user'?'bg-purple-600 text-white rounded-br-none':'bg-gray-200 text-gray-800 rounded-bl-none'),children:message.text})},index)),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"AI is typing...\"}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t border-gray-300 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Ask me anything...\",className:\"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-600 focus:outline-none\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"text-purple-600 hover:text-purple-800\",children:/*#__PURE__*/_jsx(Send,{size:20})})]})]})]});};export default ChatBot;","map":{"version":3,"names":["React","useState","useRef","useEffect","MessageCircle","X","Send","Sparkles","chatWithAI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatBot","isOpen","setIsOpen","messages","setMessages","text","sender","input","setInput","loading","setLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","trim","userMessage","data","prev","message","error","handleKeyPress","e","key","shiftKey","preventDefault","children","onClick","className","size","map","index","concat","ref","type","value","onChange","target","onKeyPress","placeholder"],"sources":["/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/src/components/ChatBot.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { MessageCircle, X, Send, Sparkles } from 'lucide-react';\nimport { chatWithAI } from '../services/api';\n\nconst ChatBot = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState([\n    {\n      text: \"Hi! I'm your AI fashion assistant. How can I help you find the perfect dress today?\",\n      sender: 'ai',\n    },\n  ]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = { text: input, sender: 'user' };\n    setMessages([...messages, userMessage]);\n    setInput('');\n    setLoading(true);\n\n    try {\n      const { data } = await chatWithAI(input);\n      setMessages((prev) => [...prev, { text: data.message, sender: 'ai' }]);\n    } catch (error) {\n      setMessages((prev) => [\n        ...prev,\n        { text: 'Sorry, I encountered an error. Please try again!', sender: 'ai' },\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  return (\n    <>\n      {/* Chat Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"fixed bottom-6 right-6 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition z-50\"\n      >\n        {isOpen ? <X size={24} /> : <MessageCircle size={24} />}\n      </button>\n\n      {/* Chat Window */}\n      {isOpen && (\n        <div className=\"fixed bottom-20 right-6 w-80 max-h-[500px] bg-white rounded-lg shadow-2xl flex flex-col overflow-hidden z-50\">\n          {/* Header */}\n          <div className=\"bg-purple-600 text-white p-4 flex justify-between items-center\">\n            <span>AI Fashion Assistant</span>\n            <button onClick={() => setIsOpen(false)}>\n              <X size={20} />\n            </button>\n          </div>\n\n          {/* Messages */}\n          <div className=\"flex-1 p-4 overflow-y-auto space-y-2\">\n            {messages.map((message, index) => (\n              <div\n                key={index}\n                className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div\n                  className={`max-w-[80%] p-2 rounded-lg ${\n                    message.sender === 'user'\n                      ? 'bg-purple-600 text-white rounded-br-none'\n                      : 'bg-gray-200 text-gray-800 rounded-bl-none'\n                  }`}\n                >\n                  {message.text}\n                </div>\n              </div>\n            ))}\n            {loading && <div className=\"text-gray-500\">AI is typing...</div>}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input */}\n          <div className=\"p-4 border-t border-gray-300 flex items-center gap-2\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"Ask me anything...\"\n              className=\"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-600 focus:outline-none\"\n            />\n            <button onClick={sendMessage} className=\"text-purple-600 hover:text-purple-800\">\n              <Send size={20} />\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ChatBot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}