{"ast":null,"code":"import _objectSpread from\"/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useState,useEffect,useContext}from'react';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const useCart=()=>{const context=useContext(CartContext);if(!context){throw new Error('useCart must be used within CartProvider');}return context;};export const CartProvider=_ref=>{let{children}=_ref;const[cart,setCart]=useState([]);useEffect(()=>{const savedCart=localStorage.getItem('cart');if(savedCart){setCart(JSON.parse(savedCart));}},[]);useEffect(()=>{localStorage.setItem('cart',JSON.stringify(cart));},[cart]);const addToCart=function(product,size){let quantity=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;const existingItem=cart.find(item=>item._id===product._id&&item.size===size);if(existingItem){setCart(cart.map(item=>item._id===product._id&&item.size===size?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+quantity}):item));toast.info('Cart updated');}else{setCart([...cart,_objectSpread(_objectSpread({},product),{},{size,quantity})]);toast.success('Added to cart!');}};const removeFromCart=(productId,size)=>{setCart(cart.filter(item=>!(item._id===productId&&item.size===size)));toast.info('Removed from cart');};const updateQuantity=(productId,size,quantity)=>{if(quantity===0){removeFromCart(productId,size);}else{setCart(cart.map(item=>item._id===productId&&item.size===size?_objectSpread(_objectSpread({},item),{},{quantity}):item));}};const clearCart=()=>{setCart([]);toast.success('Cart cleared');};const getTotal=()=>{return cart.reduce((total,item)=>total+item.price*item.quantity,0);};const getItemCount=()=>{return cart.reduce((count,item)=>count+item.quantity,0);};const value={cart,addToCart,removeFromCart,updateQuantity,clearCart,getTotal,getItemCount};return/*#__PURE__*/_jsx(CartContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","toast","jsx","_jsx","CartContext","useCart","context","Error","CartProvider","_ref","children","cart","setCart","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","product","size","quantity","arguments","length","undefined","existingItem","find","item","_id","map","_objectSpread","info","success","removeFromCart","productId","filter","updateQuantity","clearCart","getTotal","reduce","total","price","getItemCount","count","value","Provider"],"sources":["/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { toast } from 'react-toastify';\n\nconst CartContext = createContext();\n\nexport const useCart = () => {\n    const context = useContext(CartContext);\n    if (!context) {\n        throw new Error('useCart must be used within CartProvider');\n    }\n    return context;\n};\n\nexport const CartProvider = ({ children }) => {\n    const [cart, setCart] = useState([]);\n\n    useEffect(() => {\n        const savedCart = localStorage.getItem('cart');\n        if (savedCart) {\n            setCart(JSON.parse(savedCart));\n        }\n    }, []);\n\n    useEffect(() => {\n        localStorage.setItem('cart', JSON.stringify(cart));\n    }, [cart]);\n\n    const addToCart = (product, size, quantity = 1) => {\n        const existingItem = cart.find(\n            item => item._id === product._id && item.size === size\n        );\n\n        if (existingItem) {\n            setCart(cart.map(item =>\n                item._id === product._id && item.size === size\n                    ? { ...item, quantity: item.quantity + quantity }\n                    : item\n            ));\n            toast.info('Cart updated');\n        } else {\n            setCart([...cart, { ...product, size, quantity }]);\n            toast.success('Added to cart!');\n        }\n    };\n\n    const removeFromCart = (productId, size) => {\n        setCart(cart.filter(item => !(item._id === productId && item.size === size)));\n        toast.info('Removed from cart');\n    };\n\n    const updateQuantity = (productId, size, quantity) => {\n        if (quantity === 0) {\n            removeFromCart(productId, size);\n        } else {\n            setCart(cart.map(item =>\n                item._id === productId && item.size === size\n                    ? { ...item, quantity }\n                    : item\n            ));\n        }\n    };\n\n    const clearCart = () => {\n        setCart([]);\n        toast.success('Cart cleared');\n    };\n\n    const getTotal = () => {\n        return cart.reduce((total, item) => total + item.price * item.quantity, 0);\n    };\n\n    const getItemCount = () => {\n        return cart.reduce((count, item) => count + item.quantity, 0);\n    };\n\n    const value = {\n        cart,\n        addToCart,\n        removeFromCart,\n        updateQuantity,\n        clearCart,\n        getTotal,\n        getItemCount,\n    };\n\n    return (\n        <CartContext.Provider value={value}>\n            {children}\n        </CartContext.Provider>\n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}