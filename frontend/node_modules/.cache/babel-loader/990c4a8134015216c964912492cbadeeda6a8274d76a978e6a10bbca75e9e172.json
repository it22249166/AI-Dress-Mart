{"ast":null,"code":"import _objectSpread from\"/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useCart}from'../context/CartContext';import{useAuth}from'../context/AuthContext';import{createOrder}from'../services/api';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Checkout=()=>{const navigate=useNavigate();const{cart,getTotal,clearCart}=useCart();const{user}=useAuth();const[formData,setFormData]=useState({street:'',city:'',state:'',zipCode:'',country:'',paymentMethod:'card'});const[loading,setLoading]=useState(false);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();if(!user){toast.error('Please login to place an order');navigate('/login');return;}if(cart.length===0){toast.error('Your cart is empty');navigate('/cart');return;}setLoading(true);try{const subtotal=getTotal();const shipping=subtotal>100?0:10;const tax=subtotal*0.1;const total=subtotal+shipping+tax;const orderData={orderItems:cart.map(item=>{var _item$images,_item$images$;return{product:item._id,name:item.name,quantity:item.quantity,size:item.size,price:item.price,image:((_item$images=item.images)===null||_item$images===void 0?void 0:(_item$images$=_item$images[0])===null||_item$images$===void 0?void 0:_item$images$.url)||''};}),shippingAddress:{street:formData.street,city:formData.city,state:formData.state,zipCode:formData.zipCode,country:formData.country},paymentMethod:formData.paymentMethod,itemsPrice:subtotal,taxPrice:tax,shippingPrice:shipping,totalPrice:total};await createOrder(orderData);toast.success('Order placed successfully!');clearCart();navigate('/profile');}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to place order');}finally{setLoading(false);}};if(cart.length===0){navigate('/cart');return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"checkout-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shipping Information\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"street\",placeholder:\"Street Address\",value:formData.street,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",placeholder:\"City\",value:formData.city,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"state\",placeholder:\"State\",value:formData.state,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"zipCode\",placeholder:\"ZIP Code\",value:formData.zipCode,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"country\",placeholder:\"Country\",value:formData.country,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"paymentMethod\",value:formData.paymentMethod,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"card\",children:\"Credit / Debit Card\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paypal\",children:\"PayPal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cod\",children:\"Cash on Delivery\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Placing Order...':'Place Order'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Order Summary\"}),cart.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"order-item\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"dress\",children:\"\\uD83D\\uDC57\"}),\" \",item.name,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Size: \",item.size,\" \\xD7 \",item.quantity,/*#__PURE__*/_jsxs(\"strong\",{children:[\" $\",(item.price*item.quantity).toFixed(2)]})]},item._id)),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal: $\",getTotal().toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Shipping: \",getTotal()>100?'FREE':'$10.00']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tax: $\",(getTotal()*0.1).toFixed(2)]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total: $\",(getTotal()*1.1+(getTotal()>100?0:10)).toFixed(2)]})]})]});};export default Checkout;","map":{"version":3,"names":["React","useState","useNavigate","useCart","useAuth","createOrder","toast","jsx","_jsx","jsxs","_jsxs","Checkout","navigate","cart","getTotal","clearCart","user","formData","setFormData","street","city","state","zipCode","country","paymentMethod","loading","setLoading","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","error","length","subtotal","shipping","tax","total","orderData","orderItems","map","item","_item$images","_item$images$","product","_id","quantity","size","price","image","images","url","shippingAddress","itemsPrice","taxPrice","shippingPrice","totalPrice","success","_error$response","_error$response$data","response","data","message","className","children","onSubmit","type","placeholder","onChange","required","disabled","role","toFixed"],"sources":["/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/src/pages/Checkout.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCart } from '../context/CartContext';\nimport { useAuth } from '../context/AuthContext';\nimport { createOrder } from '../services/api';\nimport { toast } from 'react-toastify';\n\nconst Checkout = () => {\n    const navigate = useNavigate();\n    const { cart, getTotal, clearCart } = useCart();\n    const { user } = useAuth();\n\n    const [formData, setFormData] = useState({\n        street: '',\n        city: '',\n        state: '',\n        zipCode: '',\n        country: '',\n        paymentMethod: 'card',\n    });\n\n    const [loading, setLoading] = useState(false);\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        if (!user) {\n            toast.error('Please login to place an order');\n            navigate('/login');\n            return;\n        }\n\n        if (cart.length === 0) {\n            toast.error('Your cart is empty');\n            navigate('/cart');\n            return;\n        }\n\n        setLoading(true);\n\n        try {\n            const subtotal = getTotal();\n            const shipping = subtotal > 100 ? 0 : 10;\n            const tax = subtotal * 0.1;\n            const total = subtotal + shipping + tax;\n\n            const orderData = {\n                orderItems: cart.map((item) => ({\n                    product: item._id,\n                    name: item.name,\n                    quantity: item.quantity,\n                    size: item.size,\n                    price: item.price,\n                    image: item.images?.[0]?.url || '',\n                })),\n                shippingAddress: {\n                    street: formData.street,\n                    city: formData.city,\n                    state: formData.state,\n                    zipCode: formData.zipCode,\n                    country: formData.country,\n                },\n                paymentMethod: formData.paymentMethod,\n                itemsPrice: subtotal,\n                taxPrice: tax,\n                shippingPrice: shipping,\n                totalPrice: total,\n            };\n\n            await createOrder(orderData);\n            toast.success('Order placed successfully!');\n            clearCart();\n            navigate('/profile');\n        } catch (error) {\n            toast.error(error.response?.data?.message || 'Failed to place order');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (cart.length === 0) {\n        navigate('/cart');\n        return null;\n    }\n\n    return (\n        <div className=\"checkout-page\">\n            <h2>Checkout</h2>\n\n            {/* Checkout Form */}\n            <form onSubmit={handleSubmit} className=\"checkout-form\">\n                <h3>Shipping Information</h3>\n\n                <input\n                    type=\"text\"\n                    name=\"street\"\n                    placeholder=\"Street Address\"\n                    value={formData.street}\n                    onChange={handleChange}\n                    required\n                />\n                <input\n                    type=\"text\"\n                    name=\"city\"\n                    placeholder=\"City\"\n                    value={formData.city}\n                    onChange={handleChange}\n                    required\n                />\n                <input\n                    type=\"text\"\n                    name=\"state\"\n                    placeholder=\"State\"\n                    value={formData.state}\n                    onChange={handleChange}\n                    required\n                />\n                <input\n                    type=\"text\"\n                    name=\"zipCode\"\n                    placeholder=\"ZIP Code\"\n                    value={formData.zipCode}\n                    onChange={handleChange}\n                    required\n                />\n                <input\n                    type=\"text\"\n                    name=\"country\"\n                    placeholder=\"Country\"\n                    value={formData.country}\n                    onChange={handleChange}\n                    required\n                />\n\n                <h3>Payment Method</h3>\n                <select\n                    name=\"paymentMethod\"\n                    value={formData.paymentMethod}\n                    onChange={handleChange}\n                >\n                    <option value=\"card\">Credit / Debit Card</option>\n                    <option value=\"paypal\">PayPal</option>\n                    <option value=\"cod\">Cash on Delivery</option>\n                </select>\n\n                <button type=\"submit\" disabled={loading}>\n                    {loading ? 'Placing Order...' : 'Place Order'}\n                </button>\n            </form>\n\n            {/* Order Summary */}\n            <div className=\"order-summary\">\n                <h3>Order Summary</h3>\n                {cart.map((item) => (\n                    <div key={item._id} className=\"order-item\">\n                        <span role=\"img\" aria-label=\"dress\">ðŸ‘—</span> {item.name} <br />\n                        Size: {item.size} Ã— {item.quantity}\n                        <strong> ${(item.price * item.quantity).toFixed(2)}</strong>\n                    </div>\n                ))}\n\n                <p>Subtotal: ${getTotal().toFixed(2)}</p>\n                <p>Shipping: {getTotal() > 100 ? 'FREE' : '$10.00'}</p>\n                <p>Tax: ${(getTotal() * 0.1).toFixed(2)}</p>\n                <h4>\n                    Total: $\n                    {(getTotal() * 1.1 + (getTotal() > 100 ? 0 : 10)).toFixed(2)}\n                </h4>\n            </div>\n        </div>\n    );\n};\n\nexport default Checkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}