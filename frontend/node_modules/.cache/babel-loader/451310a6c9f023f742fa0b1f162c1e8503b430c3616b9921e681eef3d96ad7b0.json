{"ast":null,"code":"// import React, { useState } from 'react';\n// import { useNavigate } from 'react-router-dom';\n// import { useCart } from '../context/CartContext';\n// import { useAuth } from '../context/AuthContext';\n// import { createOrder } from '../services/api';\n// import { toast } from 'react-toastify';\n\n// const Checkout = () => {\n//     const navigate = useNavigate();\n//     const { cart, getTotal, clearCart } = useCart();\n//     const { user } = useAuth();\n\n//     const [formData, setFormData] = useState({\n//         street: '',\n//         city: '',\n//         state: '',\n//         zipCode: '',\n//         country: '',\n//         paymentMethod: 'card',\n//     });\n\n//     const [loading, setLoading] = useState(false);\n\n//     const handleChange = (e) => {\n//         setFormData({ ...formData, [e.target.name]: e.target.value });\n//     };\n\n//     const handleSubmit = async (e) => {\n//         e.preventDefault();\n\n//         if (!user) {\n//             toast.error('Please login to place an order');\n//             navigate('/login');\n//             return;\n//         }\n\n//         if (cart.length === 0) {\n//             toast.error('Your cart is empty');\n//             navigate('/cart');\n//             return;\n//         }\n\n//         setLoading(true);\n\n//         try {\n//             const subtotal = getTotal();\n//             const shipping = subtotal > 100 ? 0 : 10;\n//             const tax = subtotal * 0.1;\n//             const total = subtotal + shipping + tax;\n\n//             const orderData = {\n//                 orderItems: cart.map((item) => ({\n//                     product: item._id,\n//                     name: item.name,\n//                     quantity: item.quantity,\n//                     size: item.size,\n//                     price: item.price,\n//                     image: item.images?.[0]?.url || '',\n//                 })),\n//                 shippingAddress: {\n//                     street: formData.street,\n//                     city: formData.city,\n//                     state: formData.state,\n//                     zipCode: formData.zipCode,\n//                     country: formData.country,\n//                 },\n//                 paymentMethod: formData.paymentMethod,\n//                 itemsPrice: subtotal,\n//                 taxPrice: tax,\n//                 shippingPrice: shipping,\n//                 totalPrice: total,\n//             };\n\n//             await createOrder(orderData);\n//             toast.success('Order placed successfully!');\n//             clearCart();\n//             navigate('/profile');\n//         } catch (error) {\n//             toast.error(error.response?.data?.message || 'Failed to place order');\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     if (cart.length === 0) {\n//         navigate('/cart');\n//         return null;\n//     }\n\n//     return (\n//         <div className=\"checkout-page\">\n//             <h2>Checkout</h2>\n\n//             {/* Checkout Form */}\n//             <form onSubmit={handleSubmit} className=\"checkout-form\">\n//                 <h3>Shipping Information</h3>\n\n//                 <input\n//                     type=\"text\"\n//                     name=\"street\"\n//                     placeholder=\"Street Address\"\n//                     value={formData.street}\n//                     onChange={handleChange}\n//                     required\n//                 />\n//                 <input\n//                     type=\"text\"\n//                     name=\"city\"\n//                     placeholder=\"City\"\n//                     value={formData.city}\n//                     onChange={handleChange}\n//                     required\n//                 />\n//                 <input\n//                     type=\"text\"\n//                     name=\"state\"\n//                     placeholder=\"State\"\n//                     value={formData.state}\n//                     onChange={handleChange}\n//                     required\n//                 />\n//                 <input\n//                     type=\"text\"\n//                     name=\"zipCode\"\n//                     placeholder=\"ZIP Code\"\n//                     value={formData.zipCode}\n//                     onChange={handleChange}\n//                     required\n//                 />\n//                 <input\n//                     type=\"text\"\n//                     name=\"country\"\n//                     placeholder=\"Country\"\n//                     value={formData.country}\n//                     onChange={handleChange}\n//                     required\n//                 />\n\n//                 <h3>Payment Method</h3>\n//                 <select\n//                     name=\"paymentMethod\"\n//                     value={formData.paymentMethod}\n//                     onChange={handleChange}\n//                 >\n//                     <option value=\"card\">Credit / Debit Card</option>\n//                     <option value=\"paypal\">PayPal</option>\n//                     <option value=\"cod\">Cash on Delivery</option>\n//                 </select>\n\n//                 <button type=\"submit\" disabled={loading}>\n//                     {loading ? 'Placing Order...' : 'Place Order'}\n//                 </button>\n//             </form>\n\n//             {/* Order Summary */}\n//             <div className=\"order-summary\">\n//                 <h3>Order Summary</h3>\n//                 {cart.map((item) => (\n//                     <div key={item._id} className=\"order-item\">\n//                         <span role=\"img\" aria-label=\"dress\">ðŸ‘—</span> {item.name} <br />\n//                         Size: {item.size} Ã— {item.quantity}\n//                         <strong> ${(item.price * item.quantity).toFixed(2)}</strong>\n//                     </div>\n//                 ))}\n\n//                 <p>Subtotal: ${getTotal().toFixed(2)}</p>\n//                 <p>Shipping: {getTotal() > 100 ? 'FREE' : '$10.00'}</p>\n//                 <p>Tax: ${(getTotal() * 0.1).toFixed(2)}</p>\n//                 <h4>\n//                     Total: $\n//                     {(getTotal() * 1.1 + (getTotal() > 100 ? 0 : 10)).toFixed(2)}\n//                 </h4>\n//             </div>\n//         </div>\n//     );\n// };\n\n// export default Checkout;","map":{"version":3,"names":[],"sources":["/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/src/pages/Checkout.js"],"sourcesContent":["// import React, { useState } from 'react';\n// import { useNavigate } from 'react-router-dom';\n// import { useCart } from '../context/CartContext';\n// import { useAuth } from '../context/AuthContext';\n// import { createOrder } from '../services/api';\n// import { toast } from 'react-toastify';\n\n// const Checkout = () => {\n//     const navigate = useNavigate();\n//     const { cart, getTotal, clearCart } = useCart();\n//     const { user } = useAuth();\n\n//     const [formData, setFormData] = useState({\n//         street: '',\n//         city: '',\n//         state: '',\n//         zipCode: '',\n//         country: '',\n//         paymentMethod: 'card',\n//     });\n\n//     const [loading, setLoading] = useState(false);\n\n//     const handleChange = (e) => {\n//         setFormData({ ...formData, [e.target.name]: e.target.value });\n//     };\n\n//     const handleSubmit = async (e) => {\n//         e.preventDefault();\n\n//         if (!user) {\n//             toast.error('Please login to place an order');\n//             navigate('/login');\n//             return;\n//         }\n\n//         if (cart.length === 0) {\n//             toast.error('Your cart is empty');\n//             navigate('/cart');\n//             return;\n//         }\n\n//         setLoading(true);\n\n//         try {\n//             const subtotal = getTotal();\n//             const shipping = subtotal > 100 ? 0 : 10;\n//             const tax = subtotal * 0.1;\n//             const total = subtotal + shipping + tax;\n\n//             const orderData = {\n//                 orderItems: cart.map((item) => ({\n//                     product: item._id,\n//                     name: item.name,\n//                     quantity: item.quantity,\n//                     size: item.size,\n//                     price: item.price,\n//                     image: item.images?.[0]?.url || '',\n//                 })),\n//                 shippingAddress: {\n//                     street: formData.street,\n//                     city: formData.city,\n//                     state: formData.state,\n//                     zipCode: formData.zipCode,\n//                     country: formData.country,\n//                 },\n//                 paymentMethod: formData.paymentMethod,\n//                 itemsPrice: subtotal,\n//                 taxPrice: tax,\n//                 shippingPrice: shipping,\n//                 totalPrice: total,\n//             };\n\n//             await createOrder(orderData);\n//             toast.success('Order placed successfully!');\n//             clearCart();\n//             navigate('/profile');\n//         } catch (error) {\n//             toast.error(error.response?.data?.message || 'Failed to place order');\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     if (cart.length === 0) {\n//         navigate('/cart');\n//         return null;\n//     }\n\n//     return (\n//         <div className=\"checkout-page\">\n//             <h2>Checkout</h2>\n\n//             {/* Checkout Form */}\n//             <form onSubmit={handleSubmit} className=\"checkout-form\">\n//                 <h3>Shipping Information</h3>\n\n//                 <input\n//                     type=\"text\"\n//                     name=\"street\"\n//                     placeholder=\"Street Address\"\n//                     value={formData.street}\n//                     onChange={handleChange}\n//                     required\n//                 />\n//                 <input\n//                     type=\"text\"\n//                     name=\"city\"\n//                     placeholder=\"City\"\n//                     value={formData.city}\n//                     onChange={handleChange}\n//                     required\n//                 />\n//                 <input\n//                     type=\"text\"\n//                     name=\"state\"\n//                     placeholder=\"State\"\n//                     value={formData.state}\n//                     onChange={handleChange}\n//                     required\n//                 />\n//                 <input\n//                     type=\"text\"\n//                     name=\"zipCode\"\n//                     placeholder=\"ZIP Code\"\n//                     value={formData.zipCode}\n//                     onChange={handleChange}\n//                     required\n//                 />\n//                 <input\n//                     type=\"text\"\n//                     name=\"country\"\n//                     placeholder=\"Country\"\n//                     value={formData.country}\n//                     onChange={handleChange}\n//                     required\n//                 />\n\n//                 <h3>Payment Method</h3>\n//                 <select\n//                     name=\"paymentMethod\"\n//                     value={formData.paymentMethod}\n//                     onChange={handleChange}\n//                 >\n//                     <option value=\"card\">Credit / Debit Card</option>\n//                     <option value=\"paypal\">PayPal</option>\n//                     <option value=\"cod\">Cash on Delivery</option>\n//                 </select>\n\n//                 <button type=\"submit\" disabled={loading}>\n//                     {loading ? 'Placing Order...' : 'Place Order'}\n//                 </button>\n//             </form>\n\n//             {/* Order Summary */}\n//             <div className=\"order-summary\">\n//                 <h3>Order Summary</h3>\n//                 {cart.map((item) => (\n//                     <div key={item._id} className=\"order-item\">\n//                         <span role=\"img\" aria-label=\"dress\">ðŸ‘—</span> {item.name} <br />\n//                         Size: {item.size} Ã— {item.quantity}\n//                         <strong> ${(item.price * item.quantity).toFixed(2)}</strong>\n//                     </div>\n//                 ))}\n\n//                 <p>Subtotal: ${getTotal().toFixed(2)}</p>\n//                 <p>Shipping: {getTotal() > 100 ? 'FREE' : '$10.00'}</p>\n//                 <p>Tax: ${(getTotal() * 0.1).toFixed(2)}</p>\n//                 <h4>\n//                     Total: $\n//                     {(getTotal() * 1.1 + (getTotal() > 100 ? 0 : 10)).toFixed(2)}\n//                 </h4>\n//             </div>\n//         </div>\n//     );\n// };\n\n// export default Checkout;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}