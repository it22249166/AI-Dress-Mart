{"ast":null,"code":"import React,{createContext,useState,useEffect,useContext}from'react';import{login as loginAPI,register as registerAPI,getMe}from'../services/api';import{toast}from'react-toastify';const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{checkAuth();},[]);const checkAuth=async()=>{const token=localStorage.getItem('token');if(token){try{const{data}=await getMe();setUser(data);}catch(error){localStorage.removeItem('token');}}setLoading(false);};const login=async(email,password)=>{try{const{data}=await loginAPI({email,password});localStorage.setItem('token',data.token);setUser(data);toast.success('Login successful!');return true;}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed');return false;}};const register=async(name,email,password)=>{try{const{data}=await registerAPI({name,email,password});localStorage.setItem('token',data.token);setUser(data);toast.success('Registration successful!');return true;}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Registration failed');return false;}};const logout=()=>{localStorage.removeItem('token');setUser(null);toast.info('Logged out successfully');};const value={user,loading,login,register,logout};return{children};};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","login","loginAPI","register","registerAPI","getMe","toast","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","loading","setLoading","checkAuth","token","localStorage","getItem","data","error","removeItem","email","password","setItem","success","_error$response","_error$response$data","response","message","name","_error$response2","_error$response2$data","logout","info","value"],"sources":["/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { login as loginAPI, register as registerAPI, getMe } from '../services/api';\nimport { toast } from 'react-toastify';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n    const context = useContext(AuthContext);\n    if (!context) {\n        throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        checkAuth();\n    }, []);\n\n    const checkAuth = async () => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            try {\n                const { data } = await getMe();\n                setUser(data);\n            } catch (error) {\n                localStorage.removeItem('token');\n            }\n        }\n        setLoading(false);\n    };\n\n    const login = async (email, password) => {\n        try {\n            const { data } = await loginAPI({ email, password });\n            localStorage.setItem('token', data.token);\n            setUser(data);\n            toast.success('Login successful!');\n            return true;\n        } catch (error) {\n            toast.error(error.response?.data?.message || 'Login failed');\n            return false;\n        }\n    };\n\n    const register = async (name, email, password) => {\n        try {\n            const { data } = await registerAPI({ name, email, password });\n            localStorage.setItem('token', data.token);\n            setUser(data);\n            toast.success('Registration successful!');\n            return true;\n        } catch (error) {\n            toast.error(error.response?.data?.message || 'Registration failed');\n            return false;\n        }\n    };\n\n    const logout = () => {\n        localStorage.removeItem('token');\n        setUser(null);\n        toast.info('Logged out successfully');\n    };\n\n    const value = {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n    };\n\n    return { children };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}