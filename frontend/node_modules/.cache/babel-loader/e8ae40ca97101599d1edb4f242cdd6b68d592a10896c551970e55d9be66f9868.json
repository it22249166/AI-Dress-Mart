{"ast":null,"code":"var _jsxFileName = \"/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/src/context/CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within CartProvider');\n  }\n  return context;\n};\n_s(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cart, setCart] = useState([]);\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      setCart(JSON.parse(savedCart));\n    }\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }, [cart]);\n  const addToCart = (product, size, quantity = 1) => {\n    const existingItem = cart.find(item => item._id === product._id && item.size === size);\n    if (existingItem) {\n      setCart(cart.map(item => item._id === product._id && item.size === size ? {\n        ...item,\n        quantity: item.quantity + quantity\n      } : item));\n      toast.info('Cart updated');\n    } else {\n      setCart([...cart, {\n        ...product,\n        size,\n        quantity\n      }]);\n      toast.success('Added to cart!');\n    }\n  };\n  const removeFromCart = (productId, size) => {\n    setCart(cart.filter(item => !(item._id === productId && item.size === size)));\n    toast.info('Removed from cart');\n  };\n  const updateQuantity = (productId, size, quantity) => {\n    if (quantity === 0) {\n      removeFromCart(productId, size);\n    } else {\n      setCart(cart.map(item => item._id === productId && item.size === size ? {\n        ...item,\n        quantity\n      } : item));\n    }\n  };\n  const clearCart = () => {\n    setCart([]);\n    toast.success('Cart cleared');\n  };\n  const getTotal = () => {\n    return cart.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n  const getItemCount = () => {\n    return cart.reduce((count, item) => count + item.quantity, 0);\n  };\n  const value = {\n    cart,\n    addToCart,\n    removeFromCart,\n    updateQuantity,\n    clearCart,\n    getTotal,\n    getItemCount\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n_s2(CartProvider, \"gPYbNUmWK8tVVPcrFDrHV23HVlE=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","toast","jsxDEV","_jsxDEV","CartContext","useCart","_s","context","Error","CartProvider","children","_s2","cart","setCart","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","product","size","quantity","existingItem","find","item","_id","map","info","success","removeFromCart","productId","filter","updateQuantity","clearCart","getTotal","reduce","total","price","getItemCount","count","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/malith_bandara/Desktop/AI-Dress-Mart/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { toast } from 'react-toastify';\n\nconst CartContext = createContext();\n\nexport const useCart = () => {\n    const context = useContext(CartContext);\n    if (!context) {\n        throw new Error('useCart must be used within CartProvider');\n    }\n    return context;\n};\n\nexport const CartProvider = ({ children }) => {\n    const [cart, setCart] = useState([]);\n\n    useEffect(() => {\n        const savedCart = localStorage.getItem('cart');\n        if (savedCart) {\n            setCart(JSON.parse(savedCart));\n        }\n    }, []);\n\n    useEffect(() => {\n        localStorage.setItem('cart', JSON.stringify(cart));\n    }, [cart]);\n\n    const addToCart = (product, size, quantity = 1) => {\n        const existingItem = cart.find(\n            item => item._id === product._id && item.size === size\n        );\n\n        if (existingItem) {\n            setCart(cart.map(item =>\n                item._id === product._id && item.size === size\n                    ? { ...item, quantity: item.quantity + quantity }\n                    : item\n            ));\n            toast.info('Cart updated');\n        } else {\n            setCart([...cart, { ...product, size, quantity }]);\n            toast.success('Added to cart!');\n        }\n    };\n\n    const removeFromCart = (productId, size) => {\n        setCart(cart.filter(item => !(item._id === productId && item.size === size)));\n        toast.info('Removed from cart');\n    };\n\n    const updateQuantity = (productId, size, quantity) => {\n        if (quantity === 0) {\n            removeFromCart(productId, size);\n        } else {\n            setCart(cart.map(item =>\n                item._id === productId && item.size === size\n                    ? { ...item, quantity }\n                    : item\n            ));\n        }\n    };\n\n    const clearCart = () => {\n        setCart([]);\n        toast.success('Cart cleared');\n    };\n\n    const getTotal = () => {\n        return cart.reduce((total, item) => total + item.price * item.quantity, 0);\n    };\n\n    const getItemCount = () => {\n        return cart.reduce((count, item) => count + item.quantity, 0);\n    };\n\n    const value = {\n        cart,\n        addToCart,\n        removeFromCart,\n        updateQuantity,\n        clearCart,\n        getTotal,\n        getItemCount,\n    };\n\n    return (\n        <CartContext.Provider value={value}>\n            {children}\n        </CartContext.Provider>\n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}